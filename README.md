# Υποχρεωτική Εργασία Σεπτεμβρίου 2025 – LogisticsDB

Αυτή η εργασία υλοποιεί ένα Πληροφοριακό Σύστημα Διαχείρισης Αποθηκών με χρήση του
Flask microframework και της βάσης δεδομένων MongoDB.  Το σύστημα υποστηρίζει
τρεις τύπους χρηστών (Διαχειριστή, Προϊστάμενο και Υπάλληλο) και παρέχει όλες
τις λειτουργικότητες που περιγράφονται στην εκφώνηση της εργασίας.  Επιπλέον,
περιλαμβάνει διαγράμματα ροής δεδομένων, πίνακα ρίσκων και προτεινόμενο
διάγραμμα Gantt σε ξεχωριστό PDF αρχείο.

## Περιεχόμενα

1. [Επιπλέον παραδοχές & παρεκκλίσεις](#επιπλέον-παραδοχές--παρεκκλίσεις)
2. [Τεχνολογίες](#τεχνολογίες)
3. [Δομή αποθετηρίου](#δομή-αποθετηρίου)
4. [Περιγραφή βάσης δεδομένων](#περιγραφή-βάσης-δεδομένων)
5. [Τρόπος εκτέλεσης συστήματος](#τρόπος-εκτέλεσης-συστήματος)
6. [Τρόπος χρήσης συστήματος](#τρόπος-χρήσης-συστήματος)
7. [Αναφορές](#αναφορές)

## Επιπλέον παραδοχές & παρεκκλίσεις

* Η αυξητική δημιουργία μοναδικών ταυτοτήτων (`unit_id` και `product_id`) γίνεται
  μέσω μιας συλλογής `counters`.  Αυτό απλοποιεί το πρόβλημα της
  ατομικότητας στις NoSQL βάσεις.
* Οι κωδικοί χρηστών αποθηκεύονται με hash μέσω του `werkzeug.security`.
* Όλες οι διεπαφές χρήστη είναι υλοποιημένες ως Flask templates.  Το UI είναι
  απλό και λειτουργικό χωρίς ιδιαίτερη έμφαση στην αισθητική.
* Δεν υλοποιήθηκαν API endpoints χωρίς διεπαφή (REST only) αλλά όλες οι
  λειτουργίες εκτελούνται μέσω των φόρμων του web interface.
* Ο λογαριασμός διαχειριστή δημιουργείται αυτόματα εάν δεν υπάρχει κατά την
  εκκίνηση της εφαρμογής (χρήστης: `admin`, κωδικός: `admin123`).
* Εφόσον δεν είναι δυνατή η πραγματική δημιουργία ιδιωτικού GitHub
  αποθετηρίου από το περιβάλλον υποβολής, το αποθετήριο παρέχεται εδώ ως
  τοπικός φάκελος.  Θα χρειαστεί να μεταφορτώσετε τον φάκελο σε ένα ιδιωτικό
  repo με το όνομα `YpoxreotikiErgasiaSept25_E19071_Kountaxis_Dimitris` και να
  δώσετε πρόσβαση στους διδάσκοντες.

## Τεχνολογίες

* **Python 3.11** – γλώσσα προγραμματισμού.
* **Flask 2.2** – microframework για την υλοποίηση του web server και των
  templates.
* **PyMongo 4.3** – σύνδεση με MongoDB.
* **MongoDB 6** – NoSQL σύστημα βάσης δεδομένων για την αποθήκευση όλων των
  πληροφοριών.
* **Docker** & **Docker Compose** – για τον containerisation του server και της
  βάσης δεδομένων.
* **Matplotlib** – για την παραγωγή διαγραμμάτων (ροή δεδομένων, πίνακας
  ρίσκων, Gantt).

## Δομή αποθετηρίου

```
.
├── app.py                 # Κύριο αρχείο εφαρμογής Flask
├── compose.yaml           # Ορισμός υπηρεσιών Docker (server + MongoDB)
├── Dockerfile             # Δημιουργία image για το Flask server
├── requirements.txt       # Λίστα εξαρτήσεων Python
├── templates/             # HTML templates
│   ├── base.html          # Κοινή βάση για όλα τα templates
│   ├── login.html         # Σελίδα σύνδεσης
│   ├── employee/...       # Σελίδες υπαλλήλου
│   ├── supervisor/...     # Σελίδες προϊστάμενου
│   └── admin/...          # Σελίδες διαχειριστή
├── static/                # Στατικά αρχεία (εαν χρειαστούν)
├── diagrams/
│   ├── data_flow.png      # Διάγραμμα ροής δεδομένων
│   ├── risk_table.png     # Πίνακας ρίσκων
│   └── gantt_chart.png    # Προτεινόμενο διάγραμμα Gantt
├── generate_diagrams.py   # Script δημιουργίας διαγραμμάτων
├── E19071_Kountaxis_Dimitris.pdf
│                         # PDF με τα διαγράμματα και τις περιγραφές
└── README.md             # Το παρόν αρχείο
```

## Περιγραφή βάσης δεδομένων

Η MongoDB χρησιμοποιείται με την βάση `LogisticsDB` και τις παρακάτω
συλλογές:

* **users** – Περιέχει όλα τα accounts (admin, supervisors, employees).
  Τα έγγραφα έχουν τα ακόλουθα πεδία:
  * `username`: μοναδικό όνομα χρήστη.
  * `password`: κρυπτογραφημένος κωδικός.
  * `role`: `admin`, `supervisor` ή `employee`.
  * `unit_id`, `unit_name`: αναφορά στην αποθήκη (για supervisors και
    employees).
  * `name`, `surname`: προσωπικά στοιχεία.

* **units** – Περιγράφει κάθε αποθήκη.
  * `unit_id`: αυτοαυξανόμενο ακέραιο.
  * `unit_name`: όνομα αποθήκης.
  * `unit_volume`: συνολικός διαθέσιμος αποθηκευτικός χώρος.

* **products** – Ορίζει τα γενικά χαρακτηριστικά των προϊόντων.
  * `product_id`: αυτοαυξανόμενο ακέραιο.
  * `product_name`: όνομα προϊόντος.
  * `product_weight`: βάρος ενός τεμαχίου.
  * `product_volume`: όγκος που καταλαμβάνει ένα τεμάχιο.
  * `product_category`: κατηγορία προϊόντος (π.χ. Electronics).
  * `product_purchase_price`: κόστος αγοράς ενός τεμαχίου.
  * `product_selling_price`: τιμή πώλησης ενός τεμαχίου.
  * `product_manufacturer`: κατασκευαστής.

* **unit_products** – Συνδυάζει προϊόντα με συγκεκριμένη αποθήκη.
  * `unit_id`: ID αποθήκης στην οποία ανήκει το προϊόν.
  * `product_id`: ID προϊόντος.
  * `product_name`: αντιγραφή του ονόματος για ευκολία.
  * `product_quantity`: διαθέσιμα τεμάχια.
  * `product_sold_quantity`: τεμάχια που έχουν πωληθεί.
  * `product_unit_gain`: το συνολικό κέρδος ή ζημία που έχει προκύψει για
    αυτό το προϊόν στην συγκεκριμένη αποθήκη.  Αυξάνεται με κάθε πώληση
    (διαφορά τιμής πώλησης/αγοράς) και μειώνεται με κάθε αγορά.

* **counters** – Βοηθητική συλλογή για την δημιουργία αυτοαυξανόμενων
  αναγνωριστικών.  Περιέχει έγγραφα με `_id` το όνομα του counter (π.χ.
  `product_id`, `unit_id`) και `sequence_value` το τρέχον ακέραιο.

### Παραδείγματα εγγράφων

```json
{
  "username": "john",
  "password": "<hashed>",
  "role": "employee",
  "unit_id": 1,
  "unit_name": "Αποθήκη Αθήνας",
  "name": "Γιάννης",
  "surname": "Παπαδόπουλος"
}

{
  "unit_id": 1,
  "unit_name": "Αποθήκη Αθήνας",
  "unit_volume": 1000.0
}

{
  "product_id": 3,
  "product_name": "Laptop",
  "product_weight": 2.5,
  "product_volume": 0.005,
  "product_category": "Electronics",
  "product_purchase_price": 500.0,
  "product_selling_price": 650.0,
  "product_manufacturer": "Dell"
}

{
  "unit_id": 1,
  "product_id": 3,
  "product_name": "Laptop",
  "product_quantity": 10,
  "product_sold_quantity": 2,
  "product_unit_gain": 300.0
}
```

## Τρόπος εκτέλεσης συστήματος

Ακολουθήστε τα παρακάτω βήματα για να εκκινήσετε το πληροφοριακό σύστημα:

1. **Προαπαιτούμενα:** Εγκατάσταση των Docker και Docker Compose.

2. **Clone του αποθετηρίου:** Είτε χρησιμοποιήστε αυτόν τον φάκελο είτε
   κλωνοποιήστε το ιδιωτικό σας repo στο μηχάνημά σας.

3. **Εκκίνηση:** Από τη ρίζα του αποθετηρίου τρέξτε την εντολή:

   ```sh
   docker compose up -d --build
   ```

   Αυτή η εντολή κατασκευάζει την εικόνα του Flask server, εκκινεί το
   container της MongoDB (με την βάση LogisticsDB) και το container του
   server.  Η MongoDB αποθηκεύει μόνιμα τα δεδομένα σε φάκελο `data` του
   host.

4. **Πρόσβαση:** Ανοίξτε έναν browser και μεταβείτε στη διεύθυνση
   `http://localhost:5000`.  Θα εμφανιστεί η σελίδα σύνδεσης.  Χρησιμοποιήστε
   τα προκαθορισμένα διαπιστευτήρια διαχειριστή `admin` / `admin123` για την
   πρώτη σύνδεση.

5. **Τερματισμός:** Για να τερματίσετε τα containers:

   ```sh
   docker compose down
   ```

### Εναλλακτική εκτέλεση χωρίς Docker

Εάν δεν επιθυμείτε να χρησιμοποιήσετε Docker, μπορείτε να εκτελέσετε την
εφαρμογή απευθείας με Python:

```sh
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
export MONGO_HOST=localhost
export MONGO_PORT=27017
export MONGO_DB_NAME=LogisticsDB
export SECRET_KEY=your‑secret
flask --app app.py run
```

Σε αυτή την περίπτωση θα χρειαστεί να έχετε εγκατεστημένο ένα τοπικό
instance της MongoDB.

## Τρόπος χρήσης συστήματος

Το σύστημα υποστηρίζει τρεις ρόλους.  Παρακάτω περιγράφονται συνοπτικά οι
λειτουργίες κάθε ρόλου με παραδείγματα χρήσης.

### Διαχειριστής (Admin)

* **Δημιουργία αποθήκης:** Από το μενού «Units» επιλέξτε «Create New Unit».
  Συμπληρώστε όνομα και συνολικό όγκο αποθήκης.  Ένα μοναδικό `unit_id`
  αποδίδεται αυτόματα.  Με τη δημιουργία αποθήκης αρχικοποιούνται και οι
  εγγραφές `unit_products` για όλα τα υπάρχοντα προϊόντα.

* **Δημιουργία προϊστάμενου:** Από το μενού «Supervisors» επιλέξτε «Create
  New Supervisor».  Συμπληρώστε username, όνομα, επώνυμο, κωδικό πρόσβασης
  και επιλέξτε σε ποια αποθήκη θα ανήκει.  Ο προϊστάμενος αποκτά πρόσβαση
  σε όλες τις λειτουργίες του ρόλου του.

* **Δημιουργία προϊόντος:** Από το μενού «Products» επιλέξτε «Create New
  Product».  Συμπληρώστε τις απαιτούμενες πληροφορίες.  Το `product_id`
  αποδίδεται αυτόματα.  Με τη δημιουργία προϊόντος προστίθεται μία εγγραφή
  `unit_products` για κάθε αποθήκη με ποσότητες μηδενικές.

* **Προβολή/διαγραφή αποθηκών, προϊσταμένων και προϊόντων:** Οι σελίδες
  «Units», «Supervisors» και «Products» εμφανίζουν λίστες με τα σχετικά
  αντικείμενα.  Από εκεί μπορείτε να διαγράψετε εγγραφές ή να αποκτήσετε
  πρόσβαση ως προϊστάμενος σε συγκεκριμένη αποθήκη.

* **Προβολή στατιστικών εταιρείας:** Η αρχική σελίδα του διαχειριστή
  παρουσιάζει το συνολικό κέρδος/ζημία, τη χρήση όγκου και τον αριθμό
  εργαζομένων για όλη την εταιρεία.

### Προϊστάμενος (Supervisor)

* **Είσοδος:** Χρησιμοποιήστε το δικό σας username/κωδικό και εισάγετε το
  `unit_id` της αποθήκης σας.

* **Διαχείριση υπαλλήλων:** Μέσω του μενού «Employees» μπορείτε να
  δημιουργήσετε νέους υπαλλήλους για την αποθήκη σας (συμπληρώνοντας
  username, όνομα, επώνυμο, κωδικό).  Επίσης μπορείτε να αλλάξετε τους
  κωδικούς τους ή να τους διαγράψετε.

* **Προβολή/αναζήτηση προϊόντων:** Από το μενού «Products» εμφανίζεται
  κατάλογος με όλα τα προϊόντα της αποθήκης.  Μπορείτε να
  φιλτράρετε/ταξινομήσετε ανά όνομα, ID ή πλήθος τεμαχίων, καθώς και να
  αναζητήσετε προϊόντα βάσει εύρους ποσοτήτων.  Πατώντας «View» σε κάποιο
  προϊόν εμφανίζονται οι λεπτομέρειες.

* **Αγορά τεμαχίων:** Από τη σελίδα ενός προϊόντος μπορείτε να αυξήσετε την
  ποσότητα της αποθήκης («Purchase Units»).  Το σύστημα μειώνει το
  `product_unit_gain` κατά το κόστος αγοράς.

* **Πώληση τεμαχίων:** Όπως και ο υπάλληλος, μπορείτε να αφαιρέσετε
  ποσότητες («Sell Units») αυξάνοντας το κέρδος (`product_unit_gain`).

* **Στατιστικά αποθήκης:** Η σελίδα «Statistics» παρουσιάζει το
  συνολικό κέρδος/ζημία, τη χρήση όγκου (%) και τον αριθμό
  εργαζομένων στην αποθήκη σας.

### Υπάλληλος (Employee)

* **Είσοδος:** Εισάγετε το `unit_id` της αποθήκης σας μαζί με το δικό σας
  username/κωδικό.

* **Προβολή προφίλ:** Μέσα από το «Profile» μπορείτε να δείτε τα στοιχεία
  σας (όνομα, username, αποθήκη) και να αλλάξετε τον κωδικό πρόσβασής
  σας.

* **Προβολή/αναζήτηση προϊόντων:** Από το μενού «Products» μπορείτε να
  δείτε όλα τα προϊόντα της αποθήκης, να τα ταξινομήσετε και να τα
  αναζητήσετε όπως περιγράφεται παραπάνω.

* **Πώληση τεμαχίων:** Επιλέγοντας ένα προϊόν πατάτε «Sell Units», δίνετε
  την ποσότητα που θέλετε να πουλήσετε και το σύστημα ενημερώνει τις
  διαθέσιμες και πωληθείσες ποσότητες καθώς και το κέρδος.

## Αναφορές

* Εκφώνηση Εργασίας «Πληροφοριακά Συστήματα – Υποχρεωτική Εργασία
  Σεπτεμβρίου 2025».
* Τεκμηρίωση Flask: <https://flask.palletsprojects.com/>
* Τεκμηρίωση PyMongo: <https://pymongo.readthedocs.io/>
* Docker και Docker Compose: <https://docs.docker.com/>

---

### Παραδοτέα αρχεία

Το παρόν αποθετήριο περιέχει το αρχείο `E19071_Kountaxis_Dimitris.pdf` με τα
διαγράμματα που ζητήθηκαν.  Για την τελική υποβολή θα πρέπει να
δημιουργήσετε ένα αρχείο ZIP με το όνομα `E19071_Kountaxis_Dimitris.zip`
που θα περιέχει:

* Το τρέχον αποθετήριο (κώδικας και README).
* Το αρχείο PDF με τα διαγράμματα.
* Ένα αρχείο TXT `YpoxreotikiErgasiaSept25_E19071_Kountaxis_Dimitris.txt`
  που θα περιέχει το URL του ιδιωτικού GitHub repo που θα δημιουργήσετε.